{#
    This template snippet is used to display dataset categories in a web page.

    theme_field          - The default package item icon.
    theme_list           - The list obtained from the package.
    theme_value          - The first item of theme_list if it exists.
    spatial_uri_value    - The last part of the string if theme_value is a string.
    package.spatial_uri  - The spatial URI of the package.

    The snippet creates a Bootstrap grid column that is 2 units wide on medium and larger screens. 
    The column is also a flex container, with its items arranged in a row and centered both vertically and horizontally.

    Inside this column, there are two possible dataset category links that can be displayed, each wrapped in a `div` with the class `dataset-categories`:

    - The first link is displayed if `theme_field` exists. The link's `href` attribute is set to the search page for datasets with the current theme value. 
      The link has a dynamic class based on the `theme_field`, and a `data-icon` attribute set to the lowercased `theme_value`.

    - The second link is displayed if `package.spatial_uri` exists. The link's `href` attribute is set to the search page for datasets with the current spatial URI. 
      The link has the class `category-spatial_uri`, a `data-icon` attribute set to the lowercased `spatial_uri_value`, and an additional `spatial_uri` attribute.

    Example:

      {% include 'schemingdcat_dataset_categories.html' with package=package %}
#}

{% asset 'ckanext-schemingdcat/schemingdcat-icons' %}

{% set theme_field = h.schemingdcat_get_default_package_item_icon() %}
{% set theme_list = package.get(theme_field) %}
{% set theme_value = theme_list[0] if theme_list is sequence and theme_list|length > 0 else theme_list %}
{% set theme_value = theme_value.split('/')[-1] if theme_value is string else theme_value %}
{% set spatial_uri_value = theme_value.split('/')[-1] if theme_value is string else theme_value %}
<div class="col-md-2 d-flex flex-row justify-content-center align-items-center">
  {% if theme_field %}
    <div class="dataset-categories">
      <a href="{{ h.url_for('dataset.search', **{theme_field:theme_value}) }}" target="_blank" rel="noopener noreferrer" class="category-{{ theme_field }}" data-icon="{{ theme_value|lower }}"></a>
    </div>
  {% endif %}
  {% if package.spatial_uri %}
    {% set spatial_uri_value = package.spatial_uri.split('/')[-1] %}
    <div class="dataset-categories">
      <a href="{{ h.url_for('dataset.search', **{'spatial_uri':package.spatial_uri}) }}" target="_blank" rel="noopener noreferrer" class="category-spatial_uri" data-icon="{{ spatial_uri_value|lower }}"></a>
    </div>
  {% endif %}
</div>